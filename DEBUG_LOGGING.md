# Система отладочного логирования

## Обзор

В приложение добавлена система отладочного логирования, которая позволяет:

- Собирать подробные логи работы приложения
- Экспортировать логи для анализа разработчиками
- Управлять режимом отладки через интерфейс

## Как включить отладочный режим

1. Откройте настройки приложения (кнопка ⚙️ в верхней панели)
2. Найдите раздел "Режим отладки" / "Debug Mode"
3. Переключите переключатель в положение "включено"
4. При включении появится раздел с экспортом логов

## Экспорт логов

Когда отладочный режим включен, в настройках появляется раздел "Логи отладки" с:

- Статистикой по количеству логов разных уровней
- Кнопками экспорта в форматах JSON и текст
- Кнопкой очистки логов

### Форматы экспорта

- **JSON**: Структурированный формат, лучше для автоматического анализа
- **Текст**: Читаемый формат для ручного просмотра

## Для разработчиков

### Использование логгера в компонентах

```typescript
import { useLogger } from "../shared/utils/logger";

const MyComponent = () => {
  const logger = useLogger("MyComponent");

  const handleAction = () => {
    logger.info(
      "User performed action",
      { actionType: "click" },
      "handleAction",
    );

    try {
      // некоторая логика
      logger.debug(
        "Processing data",
        { dataSize: data.length },
        "handleAction",
      );
    } catch (error) {
      logger.error("Failed to process data", error, { data }, "handleAction");
    }
  };
};
```

### Методы логирования

- `logger.debug(message, data?, action?)` - отладочная информация
- `logger.info(message, data?, action?)` - информационные сообщения
- `logger.warn(message, data?, action?)` - предупреждения
- `logger.error(message, error?, data?, action?)` - ошибки

### Параметры

- **message**: Описание события
- **data**: Дополнительные данные (объект)
- **action**: Название действия/функции
- **error**: Объект ошибки (только для error)

## Технические детails

### Структура лога

```typescript
interface LogEntry {
  timestamp: string;
  level: "debug" | "info" | "warn" | "error";
  message: string;
  data?: any;
  component?: string;
  action?: string;
  error?: Error;
}
```

### Настройки

- Логи хранятся в памяти (максимум 1000 записей)
- При перезапуске приложения логи очищаются
- Отладочный режим сохраняется в localStorage
- Логи выводятся в консоль браузера только при включенном режиме отладки

## Конфиденциальность

⚠️ **Важно**: Логи могут содержать пути к файлам и другую информацию о системе пользователя. Убедитесь, что пользователи понимают это при отправке логов разработчикам.

## Интеграция в существующий код

Система логирования уже интегрирована в:

- Управление настройками приложения
- Загрузку и обработку файлов игры
- Смену темы
- Инициализацию приложения

Для добавления логирования в новые компоненты используйте хук `useLogger` как показано в примере выше.
